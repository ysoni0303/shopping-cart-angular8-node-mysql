<app-checkout-header id="body"></app-checkout-header>
<section id="record_checkout">
    <div class="container">

        <div class="row" style="margin-top: 50px">
            <div class="col-md-6 col-sm-12">

                <div class="panel setup-content" id="step-4">

                    <div class="panel-heading">
                        <h3 class="panel-title">Payment Method</h3>
                    </div>

                    <div class="card-details-section final-payment-section">
                        <div class="card-details checkout-detail">
                            <form #card_pay="ngForm"
                                (ngSubmit)="card_pay.form.valid && submitCardPayment(card_pay.value)" novalidate
                                ngNativeValidate>
                                <div class="final-payment">
                                    <label>Name on Card</label>
                                    <span>
                                        <i class="icon"><img src="assets/images/username.png"></i>
                                        <input type="text" name="username" placeholder="Name on Card" required ngModel
                                            style="height: 38px;" class="form-control message" class="form-control"
                                            #user_name1="ngModel"
                                            [ngClass]="{ 'is-invalid': card_pay.submitted && user_name1.invalid }">
                                    </span>
                                    <div *ngIf="card_pay.submitted && user_name1.invalid" class="invalid-feedback err">
                                        <div *ngIf="user_name1.errors.required">Name is required
                                        </div>
                                    </div>
                                </div>
                                <div class="final-payment">
                                    <label>Card Number</label>
                                    <span>
                                        <i class="icon"><img src="assets/images/cardnumber.png"></i>
                                        <input type="text" (change)="selectCardType()" id="ACCT" name="ACCT"
                                            style="height: 38px;" placeholder="**** **** **** ****" required ngModel
                                            class="form-control message" class="form-control" #acct1="ngModel"
                                            [ngClass]="{ 'is-invalid': card_pay.submitted && acct1.invalid }">
                                    </span>
                                    <div *ngIf="card_pay.submitted && acct1.invalid" class="invalid-feedback err">
                                        <div *ngIf="acct1.errors.required">Card number is required
                                        </div>
                                    </div>
                                </div>

                                <div class="input-container">
                                    <label>Card Security Code</label>
                                    <div class="fl">
                                        <span>
                                            <i class="icon"><img src="assets/images/pin.png"></i>
                                            <input type="password" id="CVV" pattern="\d*" placeholder="****" name="CVV2"
                                                style="height: 38px;" maxlength="4" required ngModel
                                                class="form-control message" class="form-control" #cvv="ngModel"
                                                [ngClass]="{ 'is-invalid': card_pay.submitted && cvv.invalid }">
                                        </span>
                                        <span class="cart_payment_img">
                                            <img src="assets/images/mastercard.png" id="mastercard" alt="">
                                            <img src="assets/images/visa.png" id="visa" alt="">
                                            <img src="assets/images/aexpress.png" id="amex" alt="">
                                        </span>

                                    </div>
                                    <div *ngIf="card_pay.submitted && cvv.invalid" class="invalid-feedback err">
                                        <div *ngIf="cvv.errors.required">Security code is required
                                        </div>
                                        <div *ngIf="cvv.errors.pattern">Enter valid CVV</div>
                                    </div>
                                </div>
                                <div class="input-container">
                                    <label>Expiry Date</label>
                                </div>
                                <div class="input-container2">
                                    <div class="input-container">
                                        <div class="kno">
                                            <div class="expiry">
                                                <span style="padding-bottom: 6px;">
                                                    <i class="icon"><img src="assets/images/expiry.png"></i>
                                                    <select class="form-control" name="exp_month" id='exp_month'
                                                        (change)="onValid()" [(ngModel)]="exp_month">
                                                        <option value="00">Select Month</option>
                                                        <option value="01">January</option>
                                                        <option value="02">February </option>
                                                        <option value="03">March</option>
                                                        <option value="04">April</option>
                                                        <option value="05">May</option>
                                                        <option value="06">June</option>
                                                        <option value="07">July</option>
                                                        <option value="08">August</option>
                                                        <option value="09">September</option>
                                                        <option value="10">October</option>
                                                        <option value="11">November</option>
                                                        <option value="12">December</option>
                                                    </select>
                                                </span>
                                            </div>
                                            <div *ngIf="monthError" class="invalid-feedback err ">
                                                <div *ngIf="monthError">Please select month</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="input-container kno">
                                        <div class="">
                                            <div class="expiry">
                                                <span>
                                                    <i class="icon"><img src="assets/images/expiry.png"></i>
                                                    <select class="form-control" name="exp_year" id='exp_year'
                                                        (change)="onValid()" [(ngModel)]="exp_year">
                                                        <option value="00">Select Year</option>
                                                        <option value="2019"> 2019</option>
                                                        <option value="2020"> 2020</option>
                                                        <option value="2021"> 2021</option>
                                                        <option value="2022"> 2022</option>
                                                        <option value="2023"> 2023</option>
                                                        <option value="2024"> 2024</option>
                                                        <option value="2025"> 2025</option>
                                                        <option value="2026"> 2026</option>
                                                        <option value="2027"> 2027</option>
                                                        <option value="2028"> 2028</option>
                                                        <option value="2029"> 2029</option>
                                                        <option value="2030"> 2030</option>
                                                    </select>
                                                </span>

                                            </div>
                                            <div *ngIf="yearError" class="invalid-feedback err year">
                                                <div *ngIf="yearError">Please select year</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="final-payment-btn">
                                    <button type="submit" class="btn my-button" (click)="onValid()">Pay</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>

            <div style="" class="col-md-6 col-sm-12">
                <section>
                        <div class="table-responsive">
                                <h3 class="panel-title">Order Summary</h3>
                                <table class="table" id="add-cart-table">
                                    <thead>
                                        <tr class="table-head">
                                            <th>Image</th>
                                            <th>Product</th>
                                            <th>Quantity</th>
                                            <th>Price</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let item of cart_item ">
                                            <td><img [src]="item.imageurl" style="width:50px"></td>
                                            <td class="pro_detail">
                                                <span>
                                                    <strong><a routerLink="/product-details/{{item.id}}">{{item.name}}</a></strong>
                                                </span>
                                            </td>
                                            <td >
                                                <span style="color: #006287;">
                                                    {{item.qty }}
                                                </span>
                                            </td>
        
                                            <td>
                                                <span>
                                                    <b>{{item.price * item.qty | currency:current_currency }}</b>
                                                   
                                                </span>
                                            </td>
                                        </tr>
                                        <tr class="table-head order-total-last">
                                            <td  colspan="2">Total</td>
                                            <td  colspan="2">{{ total_price | currency:current_currency }}</td></tr>
                                    </tbody>
                                </table>
                            </div>
                </section>
            </div>
        </div>
    </div>
</section>
